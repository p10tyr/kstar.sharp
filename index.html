<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Kstar.sharp by ppumkin</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Kstar.sharp</h1>
        <h2>C# Cross Platform app for getting data from KSTAR Inverter</h2>
        <a href="https://github.com/ppumkin/kstar.sharp" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="kstarsharp" class="anchor" href="#kstarsharp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>kstar.sharp</h1>

<p>C# Cross Platform app for getting data from KSTAR Inverter</p>

<h2>
<a id="currently-this-repository-has-these-function" class="anchor" href="#currently-this-repository-has-these-function" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Currently this Repository has these function</h2>

<ul>
<li>Core inverter UDP communication read only</li>
<li>Parsing bytes/hex to C# Object Models</li>
<li>Cross platform SQlite implementation based on Xamarin.SQLite (Windows,*nix and Mac)</li>
<li>Console application executable runnable in Windows and on Mono (Communicate with Inverter, udpates console and saves to database)</li>
<li>MVC 4 Dashboard. Runnable on IIS or XSP or anything you configure to run ASP.NET MVC</li>
</ul>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Todo:</h2>

<ul>
<li>Windows UWP App (Native)</li>
<li>iOS App (Xamarin - But I dont have a mac so possibly Cordova but i think its too limited?)</li>
<li>Android App (Xamarin)</li>
</ul>

<h2>
<a id="disclaimer" class="anchor" href="#disclaimer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Disclaimer</h2>

<p>The protocol has been reverse engineered and the goal of this code is for read only use only. 
I cannot guarantee it will work with all models and I cannot guarantee stability
For your safety this repository will never implement setting/writting anything back to the inverter.
Please use the official kstar app for any maintanence required on your inverter.</p>

<h2>
<a id="tested-platforms" class="anchor" href="#tested-platforms" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tested Platforms</h2>

<h3>
<a id="windows" class="anchor" href="#windows" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Windows</h3>

<p>Obviosly all this works great on Windows.</p>

<h3>
<a id="nix" class="anchor" href="#nix" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>*nix</h3>

<p>To push the boundries I have the following lab setup for *nix</p>

<ul>
<li>FreeNAS 10 with ZFS</li>
<li>FreeBSD 10 jail</li>
<li>Latest mono installed in the jail</li>
<li>Console app runs within a screen. Unfortunately UDP broadcast do not work in jails at the moment. You have to specifiy and ipadress using console.exe --ip-192.168.x.y</li>
<li>XSP running in another screen and set to the root of MVC4</li>
<li>nginx proxying port 80 to XSP</li>
</ul>

<p>Currently this FreeNAS implemention has been running for days, logging data to sqlite file every 30 seconds. MVC reads from the same sqlite file and the basic dashboard works well. Thanks to the advantages of ZFS on FreeNAS it actually runs faster on my low end "nas" box than my beefy dev machine. +1 for ZFS!</p>

<p>XSP Command line</p>

<p>Set nginx_enable to YES in /etc/rc.conf  or use 'onestart'</p>

<p>fastcgi-mono-server4 /applications=/:/mnt/storage/mvc4/ /socket=tcp:127.0.0.1:9000</p>

<h3>
<a id="android" class="anchor" href="#android" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Android</h3>

<p>Will reuse the C# library in Xamarin Android project</p>

<h3>
<a id="ios" class="anchor" href="#ios" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>iOS</h3>

<p>Will reuse the C# library in Xamarin iOS project but there seems to be initial problems with this. Firstly I don't have a mac and secondly Xamarin decided to not install the iOS SDK... Looking bleak as usual with iOS.</p>

<h2>
<a id="tested-inverters" class="anchor" href="#tested-inverters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tested Inverters</h2>

<p>Hybrid KSE4000 with WiFi, EZMeter and 10kW Battery array - Stable</p>

<p>Need help adding other kstar inverters.
I hope I can add other manufacturers too maybe - we'll see what happens</p>

<h2>
<a id="screens" class="anchor" href="#screens" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Screens</h2>

<h3>
<a id="console" class="anchor" href="#console" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Console</h3>

<p><img src="http://i.imgur.com/k97oYF6.png" alt="kstar.sharp.console" title="kstar.sharp.console in Jail"></p>

<h3>
<a id="mvc4-dashboard" class="anchor" href="#mvc4-dashboard" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>MVC4 Dashboard</h3>

<p><img src="http://i.imgur.com/s0fUrq1.png" alt="kstar.sharp.mvc4" title="kstar.sharp.mvc4 in Jail"></p>

<p>All data over some time</p>

<p><img src="http://i.imgur.com/HOYTo1D.png" alt="kstar.sharp.mvc4" title="kstar.sharp.mvc4 in Jail"></p>

<p>Cross section of that data</p>

<p><img src="http://i.imgur.com/uGHr8yF.png" alt="kstar.sharp.mvc4" title="kstar.sharp.mvc4 in Jail"></p>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h1>

<ul>
<li>This source code has been made available for educational uses only but is NOT licensed as any version of "Educational Community License"</li>
<li>Reverse engineering of some protocols were accomplished by monitoring unencrypted data within a sandboxed, private network. No attempts of hacking, brute force or use of non-public or leaked code was used.</li>
<li>Source Code is released under the "fair use" policy, to allow for interobility on various other platforms, but only in a limited form. </li>
<li>The limitation is read only data collection to allow to create monitoring software for personal use</li>
<li>No further attempt to fully reverse engineer the protocol will be made. eg, to allow sending data back to hardware.</li>
<li>At no point was the main contributor under any NDA agreement.</li>
<li>Reusuing some parts of this source code in any capacity may violate copy right law</li>
<li>Redistribution of this software in source or binary forms shall be free of all charges or fees to the recipient of this software.</li>
<li>All 3rd party licenses must be adhered too.</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/ppumkin/kstar.sharp/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/ppumkin/kstar.sharp/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/ppumkin/kstar.sharp"></a> is maintained by <a href="https://github.com/ppumkin">ppumkin</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
